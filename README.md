# AI-ассистент для анализа данных о фрилансерах

Этот проект представляет собой прототип системы, которая анализирует статистические данные о доходах фрилансеров и отвечает на вопросы, заданные на естественном языке.

Система построена на базе языковой модели Google Gemini и библиотеки LangChain. Она использует архитектуру **LLM-агента**, который не хранит данные, а генерирует Python-код для их анализа "на лету" с помощью библиотеки Pandas.

## Ключевые особенности

*   **Интерфейс командной строки (CLI):** Простой и понятный способ взаимодействия.
*   **Обработка естественного языка:** Задавайте вопросы так, как если бы вы спрашивали коллегу-аналитика.
*   **Безопасность и эффективность:** Данные не передаются напрямую в LLM, анализируется только их структура.
*   **Интеллектуальная работа с данными:** Агент способен выполнять сложные запросы, включая фильтрацию, группировку, агрегацию и даже самокоррекцию в случае ошибок.

## Стек технологий

*   **Python 3.11+**
*   **LangChain** — для оркестрации и создания агента.
*   **Google Gemini 2.5 Flash** — в качестве языковой модели.
*   **Pandas** — для анализа данных.
*   **Click** — для создания интерфейса командной строки.
*   **Poetry** — для управления зависимостями.

## Установка и настройка

### 1. Клонирование репозитория

```bash
git clone https://github.com/Chthonic-Galaxy/freelancer-analysis-agent.git
cd freelancer-analysis-agent
```

### 2. Установка зависимостей

Проект использует Poetry для управления зависимостями.

```bash
poetry install
```

### 3. Настройка API-ключа

Системе требуется API-ключ для доступа к Google Gemini.

1.  Получите ключ в [Google AI Studio](https://aistudio.google.com/app/apikey).
2.  Создайте в корне проекта файл с именем `.env`.
3.  Добавьте в него свой ключ в следующем формате:

    ```
    GOOGLE_API_KEY="ВАШ_API_КЛЮЧ"
    ```

### 4. Подготовка данных

Убедитесь, что файл `freelancer_earnings_bd.csv` находится в папке `data`.

## Эксплуатация

Для взаимодействия с ассистентом используйте команду `poetry run python src/freelancer_analysis_agent/main.py`, передавая ей вопрос в кавычках.

### Примеры запросов и выводов

#### Пример 1: Простой вопрос о сравнении

**Запрос:**
```bash
poetry run python src/freelancer_analysis_agent/main.py "Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте, по сравнению с другими способами оплаты?"
```

**Вывод:**
```
...
Ответ агента: Доход у фрилансеров, принимающих оплату в криптовалюте, выше на 165.31 USD по сравнению с другими способами оплаты.
```

---

#### Пример 2: Запрос на группировку и топ-N

**Запрос:**
```bash
poetry run python src/freelancer_analysis_agent/main.py "Назови топ-3 категории работ (Job_Category) с самой высокой средней почасовой ставкой."
```

**Вывод:**
```
...
Ответ: Топ-3 категории работ с самой высокой средней почасовой ставкой:
1.  Content Writing (54.68)
2.  SEO (54.31)
3.  Customer Support (54.14)
```

---

#### Пример 3: Запрос со сложной фильтрацией

**Запрос:**
```bash
poetry run python src/freelancer_analysis_agent/main.py "Каков средний рейтинг клиента (Client_Rating) для проектов типа 'Fixed' с доходом выше 8000 USD?"
```

**Вывод:**
```
...
Ответ: Средний рейтинг клиента для проектов типа 'Fixed' с доходом выше 8000 USD составляет 4.03.
```

---

#### Пример 4: Проверка гипотезы

**Запрос:**
```bash
poetry run python src/freelancer_analysis_agent/main.py "Правда ли, что фрилансеры на платформе 'Upwork' в среднем зарабатывают больше, чем на 'Fiverr'?"
```

**Вывод:**
```
...
Ответ: Нет, это неправда. Фрилансеры на платформе 'Upwork' в среднем зарабатывают меньше (примерно 5028.96 USD), чем на 'Fiverr' (примерно 5067.72 USD).
```

---

#### Пример 5: Анализ корреляции (демонстрация решения проблемы "галлюцинаций")

**Запрос:**
```bash
poetry run python src/freelancer_analysis_agent/main.py "Существует ли связь между почасовой ставкой и заработком в USD?"
```

**Вывод:**
```
...
Ответ: Коэффициент корреляции между почасовой ставкой (Hourly_Rate) и заработком в USD (Earnings_USD) составляет примерно 0.0147. Это очень низкое значение, что указывает на отсутствие значимой линейной связи между почасовой ставкой и заработком в USD.
```